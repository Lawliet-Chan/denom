<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denom - Web3 股票代币协议</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 头部导航 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>Denom</span>
                </div>
                <nav class="main-nav">
                    <button class="nav-tab active" data-tab="minting">铸币模块</button>
                    <button class="nav-tab" data-tab="dashboard">数据面板</button>
                    <button class="nav-tab" data-tab="investment">投资市场</button>
                    <button class="nav-tab" data-tab="protocol">协议信息</button>
                </nav>
                <div class="wallet-connect">
                    <select id="wallet-selector" class="wallet-selector">
                        <option value="metamask">MetaMask</option>
                        <option value="okx">OKX Wallet</option>
                        <option value="auto">自动检测</option>
                    </select>
                    <button id="connect-wallet" class="connect-btn">
                        <i class="fas fa-wallet"></i>
                        连接钱包
                    </button>
                    <button id="disconnect-wallet" class="disconnect-btn" style="display: none;">
                        <i class="fas fa-times"></i>
                        断开钱包
                    </button>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 铸币模块 -->
            <section id="minting" class="tab-content active">
                <div class="module-header">
                    <h1><i class="fas fa-coins"></i> 铸币模块</h1>
                    <p>质押股票代币，铸造NUSD稳定币</p>
                </div>
                
                <div class="minting-grid">
                    <!-- 质押功能 -->
                    <div class="card staking-card">
                        <h3><i class="fas fa-lock"></i> 质押功能</h3>
                        <div class="staking-form">
                            <div class="form-group">
                                <label>选择代币类型</label>
                                <select id="staking-token">
                                    <option value="tAAPL">tAAPL</option>
                                    <option value="tGOOGL">tGOOGL</option>
                                    <option value="tMSFT">tMSFT</option>
                                    <option value="tTSLA">tTSLA</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>选择代持方</label>
                                <select id="staking-custodian">
                                    <option value="stablestocks">StableStocks</option>
                                    <option value="xstocks">XStocks</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>质押数量</label>
                                <input type="number" id="staking-amount" placeholder="输入质押数量" min="0" step="0.01">
                            </div>
                            <button class="btn btn-primary" id="stake-btn">
                                <i class="fas fa-lock"></i> 质押
                            </button>
                        </div>
                    </div>

                    <!-- 当前持仓 -->
                    <div class="card holdings-card">
                        <h3><i class="fas fa-chart-pie"></i> 当前持仓</h3>
                        <div class="holdings-list" id="holdings-list">
                            <div class="holding-item">
                                <span class="token-name">tAAPL</span>
                                <span class="token-amount">0.00</span>
                                <span class="token-value">$0.00</span>
                            </div>
                        </div>
                        <div class="total-value">
                            <strong>总价值: $<span id="total-holdings-value">0.00</span></strong>
                        </div>
                    </div>

                    <!-- 铸造功能 -->
                    <div class="card minting-card">
                        <h3><i class="fas fa-print"></i> 铸造NUSD</h3>
                        <div class="minting-form">
                            <div class="form-group">
                                <label>可铸造数量</label>
                                <div class="mintable-amount">
                                    <span id="mintable-amount">0.00</span> NUSD
                                </div>
                            </div>
                            <div class="form-group">
                                <label>铸造数量</label>
                                <input type="number" id="mint-amount" placeholder="输入铸造数量" min="0" step="0.01">
                            </div>
                            <button class="btn btn-success" id="mint-btn">
                                <i class="fas fa-print"></i> 铸造
                            </button>
                        </div>
                    </div>

                    <!-- 操作按钮 -->
                    <div class="card actions-card">
                        <h3><i class="fas fa-tools"></i> 操作</h3>
                        <div class="action-buttons">
                            <button class="btn btn-warning" id="repay-btn">
                                <i class="fas fa-undo"></i> 归还NUSD
                            </button>
                            <button class="btn btn-danger" id="unstake-btn">
                                <i class="fas fa-unlock"></i> 解除质押
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 数据面板&清算 -->
            <section id="dashboard" class="tab-content">
                <div class="module-header">
                    <h1><i class="fas fa-chart-bar"></i> 数据面板 & 清算</h1>
                    <p>监控持仓健康度，管理清算风险</p>
                </div>

                <div class="dashboard-grid">
                    <!-- 持仓数据面板 -->
                    <div class="card holdings-detail-card">
                        <h3><i class="fas fa-chart-pie"></i> 详细持仓数据</h3>
                        <div class="holdings-detail">
                            <div class="health-indicator">
                                <div class="health-bar">
                                    <div class="health-fill" id="health-fill"></div>
                                </div>
                                <span class="health-text">健康度: <span id="health-percentage">100%</span></span>
                            </div>
                            <div class="risk-indicator">
                                <span class="risk-level" id="risk-level">低风险</span>
                            </div>
                        </div>
                        <div class="holdings-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>代币</th>
                                        <th>数量</th>
                                        <th>价值</th>
                                        <th>质押率</th>
                                    </tr>
                                </thead>
                                <tbody id="holdings-detail-table">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 通知栏 -->
                    <div class="card notifications-card">
                        <h3><i class="fas fa-bell"></i> 通知栏</h3>
                        <div class="notifications-list" id="notifications-list">
                            <div class="notification-item info">
                                <i class="fas fa-info-circle"></i>
                                <span>系统正常运行中</span>
                            </div>
                        </div>
                    </div>

                    <!-- 清算功能 -->
                    <div class="card liquidation-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> 清算管理</h3>
                        <div class="liquidation-info">
                            <p>如果清算已经发生，您可以claim剩余的资产</p>
                        </div>
                        <div class="liquidation-actions">
                            <button class="btn btn-warning" id="claim-taapl-btn">
                                <i class="fas fa-coins"></i> Claim tAAPL
                            </button>
                            <button class="btn btn-info" id="claim-usdc-btn">
                                <i class="fas fa-dollar-sign"></i> Claim USDC
                            </button>
                        </div>
                    </div>

                    <!-- 预结算介绍 -->
                    <div class="card presettlement-card">
                        <h3><i class="fas fa-info-circle"></i> 预结算介绍</h3>
                        <div class="presettlement-content">
                            <p>我们提前将股票卖出，从托管商处获得USDC，然后1:1锁定您的tAAPL股票代币。最终剩余量取决于实际结算情况。</p>
                            <p>获得的USDC将注入保险池，用于市场回购并维护锚定。</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 投资市场 -->
            <section id="investment" class="tab-content">
                <div class="module-header">
                    <h1><i class="fas fa-chart-line"></i> 投资市场</h1>
                    <p>参与流动性池，获得收益</p>
                </div>

                <div class="investment-grid">
                    <!-- 存款池列表 -->
                    <div class="card pools-card">
                        <h3><i class="fas fa-swimming-pool"></i> 存款池</h3>
                        <div class="pools-list" id="pools-list">
                            <div class="pool-item">
                                <div class="pool-header">
                                    <h4>官方流动性池</h4>
                                    <span class="pool-apy">APY: 8.5%</span>
                                </div>
                                <div class="pool-stats">
                                    <div class="stat">
                                        <span class="label">总流动性</span>
                                        <span class="value">$1,250,000</span>
                                    </div>
                                    <div class="stat">
                                        <span class="label">您的存款</span>
                                        <span class="value">$0.00</span>
                                    </div>
                                </div>
                                <div class="pool-actions">
                                    <button class="btn btn-primary">存款</button>
                                    <button class="btn btn-outline">取款</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 投资持仓面板 -->
                    <div class="card investment-holdings-card">
                        <h3><i class="fas fa-portfolio"></i> 投资持仓</h3>
                        <div class="investment-summary">
                            <div class="summary-item">
                                <span class="label">总存款</span>
                                <span class="value">$0.00</span>
                            </div>
                            <div class="summary-item">
                                <span class="label">总收益</span>
                                <span class="value">$0.00</span>
                            </div>
                        </div>
                        <div class="investment-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>池子</th>
                                        <th>存款</th>
                                        <th>收益</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="investment-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 协议信息 -->
            <section id="protocol" class="tab-content">
                <div class="module-header">
                    <h1><i class="fas fa-shield-alt"></i> 协议信息</h1>
                    <p>查看协议状态和重要数据</p>
                </div>

                <div class="protocol-grid">
                    <!-- 协议数据面板 -->
                    <div class="card protocol-stats-card">
                        <h3><i class="fas fa-chart-area"></i> 协议数据</h3>
                        <div class="protocol-stats">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-label">保险池金额</span>
                                    <span class="stat-value" id="insurance-pool">$0.00</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-vault"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-label">协议国库余额</span>
                                    <span class="stat-value" id="treasury-balance">$0.00</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-label">总质押价值</span>
                                    <span class="stat-value" id="total-staked">$0.00</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-print"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-label">NUSD流通量</span>
                                    <span class="stat-value" id="nusd-circulation">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 协议状态 -->
                    <div class="card protocol-status-card">
                        <h3><i class="fas fa-heartbeat"></i> 协议状态</h3>
                        <div class="status-indicators">
                            <div class="status-item">
                                <span class="status-label">系统状态</span>
                                <span class="status-value online">正常运行</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">锚定状态</span>
                                <span class="status-value stable">稳定</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">清算状态</span>
                                <span class="status-value normal">正常</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 模态框 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- 加载指示器 -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <script src="js/web3.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/minting.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/investment.js"></script>
    <script src="js/protocol.js"></script>
</body>
</html>
